import React, { useRef } from "react";
import { PrimaryLink, Section, Container } from "@/components/index";
import {
  cubicBezier,
  useScroll,
  useTransform,
  motion,
  useSpring,
} from "framer-motion";
import Image from "next/image";
import Balancer from "react-wrap-balancer";

const ScrollingGallery = () => {
  return (
    <Section className="bg-primary-900">
      <Container className="flex flex-col gap-6 lg:gap-0">
        <ImageSection index={0} />
        <ImageSection index={1} />
      </Container>
    </Section>
  );
};

export default ScrollingGallery;

const ImageSection = ({ index }) => {
  const containerRef = useRef<HTMLDivElement>(null);

  const { scrollYProgress } = useScroll({
    target: containerRef,
    offset: ["center end", "start start"],
  });

  const y = useTransform(scrollYProgress, [0, 0.7], [300, 0]);

  const yText = useTransform(scrollYProgress, [0, 0.7], [-300, 0]);

  const opacity = useTransform(scrollYProgress, [0, 0.7], [0, 1]);

  /* const clipPath = useTransform(
    scrollYProgress,
    [1, 0],
    ["inset(1% 1% 1% 1%)", "inset(25% 25% 25% 25%)"],
  ); */

  const scale = useTransform(scrollYProgress, [1, 0], [1, 0]);

  const springConfig = { stiffness: 60, damping: 15, mass: 1 };

  const ySpring = useSpring(y, springConfig);

  const yTextSpring = useSpring(yText, springConfig);
  const opacitySpring = useSpring(opacity, springConfig);

  const scaleSpring = useSpring(scale, springConfig);
  const imageColumns = [
    "col-start-1 col-end-7 row-start-1 row-end-8",
    "col-start-7 col-end-13 row-start-1 row-end-7",
    "col-start-1 col-end-7 row-start-8 row-end-13",
    "col-start-7 col-end-13 row-start-7 row-end-13",
  ];

  return (
    <>
      <div
        ref={containerRef}
        className={`relative flex h-full w-full gap-6 lg:h-screen ${
          index % 2 === 1
            ? "flex-col-reverse lg:flex-row-reverse"
            : "flex-col lg:flex-row"
        }  overflow-hidden`}
      >
        <div className="grid h-[500px] w-full grid-cols-12 grid-rows-12 gap-3 lg:h-auto lg:w-1/2">
          <motion.div
            style={{
              y: ySpring,
              opacity: opacitySpring,
            }}
            className={` relative col-start-1 col-end-7 row-start-1 row-end-8 `}
          >
            <Image
              src="/content_one-1.jpg"
              fill={true}
              alt="background illustration"
              className="objectfit rounded-sm"
            />
          </motion.div>
          <motion.div
            style={{
              y: ySpring,
              opacity: opacitySpring,
            }}
            className={` relative col-start-7 col-end-13 row-start-1 row-end-6  `}
          >
            <Image
              src="/content_one-1.jpg"
              fill={true}
              alt="background illustration"
              className="objectfit rounded-sm"
            />
          </motion.div>
          <motion.div
            style={{
              y: ySpring,
              opacity: opacitySpring,
            }}
            className={` relative col-start-1 col-end-7 row-start-8 row-end-13  `}
          >
            <Image
              src="/content_one-1.jpg"
              fill={true}
              alt="background illustration"
              className="objectfit rounded-sm"
            />
          </motion.div>
          <motion.div
            style={{
              y: ySpring,
              opacity: opacitySpring,
            }}
            className={`relative col-start-7 col-end-13 row-start-6 row-end-13  `}
          >
            <Image
              src="/content_one-1.jpg"
              fill={true}
              alt="background illustration"
              className="objectfit rounded-sm"
            />
          </motion.div>
        </div>

        <motion.div
          style={{ y: yTextSpring, opacity: opacitySpring }}
          className={`relative flex h-full w-full flex-col gap-6 ${
            index % 2 === 1 ? "items-end text-right" : "items-start text-left"
          } items-start justify-center bg-transparent text-left lg:w-1/2`}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 512 512"
            className="absolute top-6 right-28 z-10 h-16 w-16 rotate-12  fill-current text-gray-300 text-opacity-10 sm:top-24 sm:right-20 sm:h-32 sm:w-32"
          >
            <path d="M219.1 1.4c-2.8 1.6-5 5.2-5.1 8.4 0 1.3 1.6 5.2 3.5 8.6 8.9 15.9 8.3 32.8-1.6 47.2-14.5 21.1-15.5 47.8-2.7 69.1 4.7 7.8 9.6 10 15.7 6.9 2.9-1.5 5.1-5.3 5.1-8.7 0-1.2-1.6-4.9-3.5-8.3-4.7-8.5-6.9-17.4-6.2-25.6.7-7.9 2.6-13 8.9-23.4 6-9.9 8.6-16.9 10.1-26.8 1.9-13.2-1.4-28.7-8.5-40.6-4.7-7.6-10-10-15.7-6.8zM156.2 20.5c-4.8 4-4.9 7.2-.6 15.9 3.3 6.9 3.6 8.1 3.2 14.4-.2 5.1-1.1 8.1-3.1 11.8-9.8 17.8-11.8 25.4-9.8 37.6 1.4 8.8 6 18.7 10.3 22.3 2.7 2.3 3.9 2.6 7.2 2.2 8.7-1.2 10.9-8.6 5.4-18.4-2.8-4.9-3.2-6.7-3.3-12.8 0-7.3.2-7.8 7.5-20.8 8.2-14.7 8-32.8-.4-47.2-4.5-7.5-11-9.5-16.4-5zM280.8 19.6c-5.8 3.1-6.2 8.3-1.5 17.4 2.7 5.3 3.2 7.4 3.2 12.9 0 6.8-.3 7.6-7.5 20.4-8.2 14.7-8 32.8.4 47.2 4.5 7.5 11 9.5 16.4 5 4.8-4 4.9-7.2.6-15.9-3.3-6.9-3.6-8.1-3.2-14.3.2-5.1 1.1-8.1 3.1-11.8 9.7-17.5 11.8-25.6 9.8-37.7-1.4-8.7-6-18.7-10.2-22.2-3.4-2.9-7.1-3.2-11.1-1zM48.6 164.5c-5.9 3.1-5.5-5.3-5.6 128.2V416H25.5c-18.9 0-21.7.6-24.1 5.1-3.8 7.4.3 28.6 8.8 45 10.3 20.1 28.9 35.3 52.3 42.6l9 2.8h305l9-2.8c29.5-9.3 50.6-30.4 58.9-59 3.2-11.1 4.4-23.4 2.6-27.7-2.2-5.3-4.9-6-24.5-6H405v-28.5h16.7c14.5 0 17.9-.3 24.8-2.3 17.2-4.9 34.7-16.3 45.2-29.4 7-8.6 13.5-21.2 16.9-32.3 2.5-8.1 2.7-10.5 2.7-24s-.2-15.9-2.7-23.9c-9.1-30-30-51.4-59.6-61.2-8-2.7-9.5-2.8-26.2-2.9H405v-21.1c0-20.9 0-21.1-2.4-23.7-1.3-1.4-3.9-2.8-5.7-3.2-1.9-.3-32.3-.5-67.7-.3l-64.4.3-3 3.4c-2.6 2.9-3 3.9-2.5 7.5.4 2.7 1.5 4.9 3.2 6.3l2.6 2.3H385v233H63V183h59.6c38.9 0 60.2-.4 61.5-1 2.4-1.3 4.9-6.1 4.9-9.4 0-1.4-1.3-4-2.9-5.8l-2.9-3.3-65.9-.3c-57.4-.2-66.2 0-68.7 1.3zm390.9 68c23.3 5.9 42.4 24.2 49.7 47.5 1.9 6.1 2.3 9.7 2.3 19.5 0 10.5-.4 13.1-2.9 20.9-7.5 22.7-27.4 41.1-50.2 46.1-7.7 1.8-27.6 1.8-31.6 0-1.6-.6-1.8-2.2-1.8-11.1 0-5.7.1-10.4.3-10.4.1 0 2.4.7 5.1 1.5 6.5 2 18.9 1.9 25.7-.1 17.7-5.3 31.1-19.6 34.8-37.2 5.2-25.2-11.1-50.9-36.4-57.3-4.5-1.1-21.2-.7-26.7.6l-2.8.7V233l2.8-.6c1.5-.3 3.2-.7 3.7-.9 3.1-1 22.8-.3 28 1zm-3.7 41.1c5.6 2.8 10 7.3 13.4 13.7 1.8 3.3 2.3 5.9 2.3 12.2 0 7.1-.3 8.6-3.1 13.5-7.7 13.6-24.2 19-37.5 12.2l-5.4-2.7-.3-22.7-.2-22.6 2.7-2c4.4-3 8.3-4 15.9-4.1 5.6-.1 8 .4 12.2 2.5zM427 437.3c0 2.7-3.3 12.4-6.2 18.2-8.3 16.5-22.8 28.4-41.4 34.2-5.6 1.7-13.2 1.8-155.4 1.8-168 0-153.5.6-168.8-7.5-9.4-5.1-14.3-9.1-20.2-16.5-6.8-8.6-14-24.1-14-30.2 0-1.1 35.6-1.3 203-1.3s203 .2 203 1.3z" />
            <path d="M220.4 163.9c-1.2.5-3.1 2.2-4.4 3.8-4.7 6-.1 15.3 7.6 15.3 4.6 0 7-1.4 8.9-5 2.2-4.3 1.8-7.6-1.2-11-3-3.2-7.5-4.5-10.9-3.1zM213.3 245c-13.4 4-25.8 12.9-33.2 23.9-6.8 10.2-17.1 28.8-19.2 34.7-3 8.3-3.7 25.6-1.5 34.3 5.4 21 19.9 36.3 41.6 43.7 4.2 1.5 8.2 1.9 17.5 1.9 14.3-.1 22.1-2.4 33.4-9.9 8.9-6 14.4-12.3 22.7-26.7 14.1-24.3 15.9-29.7 15.1-46.4-.3-7.8-1.1-12.8-2.7-17.4-2.9-8.2-10.8-19.9-17.2-25.5-6.1-5.4-17-11-25.3-13.1-8.1-2.1-23.4-1.8-31.2.5zm34.1 21.9c7.5 3.7 7.4 3.2 3.1 12.8-2.8 6.2-9.8 14-16.5 18.3-2.6 1.7-8.5 4.3-13.1 5.9-16.9 5.7-27.5 13.2-35.7 25.1-2.6 3.8-5 6.9-5.3 7-2.2.1-2.5-17.6-.5-24.3 1.7-5.6 15.8-30.4 20.3-35.7 7.6-8.8 18.4-13.1 31.9-12.7 8 .2 9.9.7 15.8 3.6zm22 27.2c1.1 5.8.6 16.8-1 21.6-.9 2.6-5.2 11-9.5 18.5-12.2 21-21.5 28.3-37.9 29.5-7.8.6-17.1-1.5-23-5.2-3.4-2.1-4-3-3.4-4.8 1.6-5.3 7.3-14.5 11.7-18.9 5.5-5.5 10.9-8.5 24.1-13.2 5.1-1.8 12-5.1 15.2-7.2 7.1-4.8 15.6-13.3 19.1-19.1 1.3-2.3 2.8-4.3 3.3-4.3.4 0 1 1.4 1.4 3.1z" />
          </svg>
          <h2 className=" font-text text-xl font-semibold text-tertiary-300">
            Lorem.
          </h2>
          <h3 className=" max-w-2xl font-title text-4xl text-white sm:text-6xl xl:text-8xl">
            <Balancer>Lorem, ipsum dolor.</Balancer>
          </h3>
          <p className=" font-text text-xl text-gray-300 text-opacity-80">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit. Possimus
            distinctio dolores laboriosam in cupiditate? Repellat tempora
            dolorum reprehenderit laborum possimus.
          </p>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width={682.667}
            height={682.667}
            viewBox="0 0 512 512"
            className="absolute  left-4 bottom-24 z-10 h-16 w-16  fill-current text-gray-300 text-opacity-10 sm:bottom-10 sm:left-20 sm:h-32 sm:w-32"
          >
            <path d="M340 .6c-12 2.1-15.6 3-23.5 5.6-38.5 12.9-78.8 48.4-103.2 91l-4.9 8.6-7-4.5c-15-9.8-35.5-18.4-52.4-21.9-10.5-2.2-30.6-2.5-40.5-.5-12.2 2.4-23.1 6.8-26.6 10.8-2.9 3.4-3.1 4-2.7 9.8l.4 6.1-4.6 3.2c-2.5 1.7-6.7 5.3-9.3 8l-4.9 5-4.7-2.1c-5.8-2.4-10.6-1.8-15 1.9C34.8 126.9 24 147.3 24 154c0 5.2 5.2 8.4 10.5 6.4.8-.4 4-5.6 7-11.8 8.1-16.6 7.1-15.8 16.1-11.2 17.5 9 36.2 25.3 49.1 42.7 13.3 18 20.8 32.2 32.6 61.5 12 29.7 27.6 58 41.5 75.1 2.1 2.7 3.2 5 2.9 6-.3 1-2.3 6.7-4.5 12.8-2.2 6-5 15.5-6.1 21-1.2 5.4-2.4 10.1-2.6 10.3-.8.8-10.8-2.9-20.3-7.3-22.4-10.6-43.9-27.7-64.1-51.1-31.4-36.2-49.8-75.8-52.6-112.9-.8-9.9-2.1-12.9-6-13.9-3.4-.9-8.3 1.8-9.1 5-.9 3.5.4 16.8 2.7 28.9 12.9 67.7 78.1 144.7 139 164.2l8.9 2.8v8c0 18.2 4.8 38.1 12.8 53.7 8.5 16.7 15.3 21.3 25.3 17.1l4.8-2.1 2.3 2.5c1.3 1.4 6.1 5 10.8 8.1 4.7 3 8.8 5.8 9.3 6.2.4.3.2 3.2-.3 6.3-1.4 7.6 0 12.8 4.4 16.4 4.3 3.3 15.4 7.8 26.5 10.6 11.5 2.8 36.4 3 49.1.3 52.6-11.1 104.5-50.5 142.8-108.1 33.7-50.6 45-103.9 31.1-146.5-4.5-13.8-13.9-30-19.5-33.7-3.5-2.2-11.3-2.2-14.8.1-2.7 1.7-2.7 1.7-7.9-3-2.9-2.6-8.3-6.7-12-9.2-4.9-3.3-6.6-5-6.2-6.1.4-.9.9-3.7 1.2-6.2.7-6.3-2.4-11.9-8.4-15.1-2.3-1.3-4.3-2.6-4.3-2.9 0-.4 2.9-5.6 6.5-11.5 22.3-37.2 28.3-75.7 16.4-106.5-6.7-17.4-14.2-24.6-23.2-22.2-4 1.1-4.1 1-9.9-3.8-3.2-2.7-6.7-5.3-7.7-5.8-1.5-.9-1.7-1.9-1.3-6.2.9-9.9-3.9-14.3-21.3-19.4-7-2.1-11.7-2.7-21-3-6.6-.2-13.1-.2-14.5.1zM362.4 16c7.6 1.2 15.6 3.6 17.9 5.2 1.7 1.2 1.6 1.7-.7 8.3-3.8 11.1-7 17.8-13.5 27.8-3.4 5.2-6.1 10.4-6.1 11.7 0 6.1 8.6 9.3 12.7 4.7 3.6-3.9 11.7-17 14.8-23.9 1.7-3.7 3.5-6.8 4-6.8.6 0 3.4 2.2 6.4 4.8 6.5 5.7 6.5 5.7-1 18.6-7.9 13.8-15.1 23.1-27.8 35.6-13.2 13.1-24.5 21.9-44.9 34.9-18.3 11.6-28.5 19.4-39.8 30.3-5 4.8-9.3 8.8-9.6 8.8-.3 0-2.5-2.9-4.8-6.5l-4.3-6.6 2.4-2.6c7.2-7.9 27-23.3 45.9-35.8 20.5-13.5 32-21.9 34.8-25.3 1.7-2.2 1.5-7.7-.4-9.6-2.3-2.3-5.9-2.9-8.6-1.5-1.2.7-5.2 3.6-8.8 6.4-3.6 2.9-15.7 11.3-27 18.7-20 13.2-30.7 21.5-42 32.5l-5.6 5.3-9.2-10.3c-5.1-5.6-13-13.6-17.7-17.7-4.7-4.1-8.5-8-8.5-8.5 0-.6 2.9-5.9 6.4-11.8 33.9-56.9 91.4-93.9 135-86.7zm66.1 62.2c5.2 25.9-3.1 57.7-22.9 88.1l-5.1 7.9-4-.6c-22.6-3.3-35.8-2.8-55.1 1.8-15.2 3.7-35.5 12.4-48.7 20.8-2.6 1.7-4.9 2.9-5.1 2.7-.2-.2-1.4-2.4-2.6-4.9l-2.3-4.4 10-9.6c12.2-11.8 22-19.4 40.4-31.1 19.4-12.3 31.4-21.5 44.1-33.8 17.4-16.7 28.7-31.8 37.5-50.3l4.8-9.9 3.7 7.8c2 4.3 4.4 11.3 5.3 15.5zM141 93.5c11.2 1.7 17.5 3.5 29 8.2 36.5 15 74.8 51.8 99.9 95.9 2.8 4.9 5.1 9.3 5.1 9.6 0 .3-3.8 3.7-8.5 7.4-4.7 3.8-8.8 7.9-9.1 9.1-1.4 5.5 3.1 11.1 7.9 9.9 1.2-.3 6.3-3.8 11.2-7.7 23.9-19.2 49.5-32.2 74-37.5 12.1-2.6 33.5-2.4 44.8.4 4.8 1.2 11 3.1 13.7 4.3 5.8 2.5 5.8 1.4.4 17.8-10.9 33-32.5 61.9-66.4 88.7-4.2 3.3-16.3 11.9-27 19.1-25.5 17.2-38.3 27.6-56.1 45.3-23.7 23.5-39.8 45.4-51.9 70.4l-6.8 13.8-2.5-4.3c-5-8.5-8.8-17.7-11.3-27.5-3.7-13.8-3.9-35.5-.6-52.1 6.8-33.8 24.7-68.9 51.6-100.8 8.3-9.9 9.5-13.6 5.6-17.5-3.3-3.3-7.7-2.6-11.8 1.7-3.4 3.7-13.8 16.5-17.8 21.9l-2.1 2.9-3.8-6c-6.4-9.9-14.7-27.1-21.9-45-17-42.5-34.6-71.3-58.1-95-8.7-8.8-19.8-17.9-28.3-23.4-2.8-1.8-5.2-3.7-5.2-4.2 0-1.1 12.3-4.7 19.7-5.8 9-1.3 15.9-1.2 26.3.4zm-41.9 27.2c8.4 6.1 24.6 21.9 32.2 31.3 15 18.5 27.5 41.1 40.6 73.2 9.4 23 16 36.5 24.8 50.5l6.4 10.2-5.7 9.8c-3.1 5.4-5.8 9.9-5.9 10.1-.2.2-4.2-5.4-8.8-12.5-11.3-16.9-20-33.8-29.1-56.5-16.5-41-30.6-64.1-52-85.3-5.6-5.5-14.1-12.8-18.9-16.1l-8.7-6.2 4.1-3.7c4.1-3.6 12.7-9.5 14-9.5.4 0 3.5 2.1 7 4.7zm331 104.4c6.4 4.7 12.9 11.1 12.9 12.7 0 .4-2.6 5.9-5.8 12.2-11.1 22.2-24.5 40.3-44.3 59.6-16.6 16.2-27.4 24.7-52.4 41.4-26.4 17.5-45.3 33.3-60.7 50.4-8 8.9-8.9 10.2-8.6 13.4.4 4.5 4.4 7.8 8.2 6.8 1.4-.3 5.7-3.9 9.4-7.9 18.5-19.8 33-32 60.7-50.7 36.2-24.5 56.9-42.7 76.7-67.5 11.9-14.9 25.4-38.2 31.3-54 1.3-3.2 2.7-6.1 3.2-6.2 1.3-.5 7.9 11 11.2 19.7 16.6 42.9 2.5 99.5-38 153-35.1 46.3-78.3 77.1-121.7 86.6-5.4 1.2-12.2 1.7-22.7 1.7-15.7 0-22.1-1.1-35.7-6.3-5.6-2.1-5.7-2.2-5.1-5.3 1.2-7 6.6-21.4 11.4-30.8 4.7-9 5.1-10.1 4-12.8-1.2-2.7-4.7-5.1-7.5-5.1-3 0-6.6 4.5-11.5 14.4-2.9 5.9-5.6 10.6-6 10.6-1.2 0-12.3-7.9-15.9-11.3-1.7-1.7-3.2-4-3.2-5.2 0-2.7 11.6-22.9 19.9-34.6 14.2-19.9 34.6-41.3 56.1-58.4 5.2-4.2 18.3-13.6 29-20.8 30.1-20.4 46.3-34 62.8-52.7 12.7-14.5 26.7-37.2 32.7-53.3 1-2.6 2-4.7 2.3-4.7.2 0 3.5 2.3 7.3 5.1z" />
          </svg>
        </motion.div>
      </div>
    </>
  );
};
